<!DOCTYPE html>
<html lang="en" style="scroll-behavior: auto;">

<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <meta content="#ffffff" name="theme-color" />
  <meta content="#da532c" name="msapplication-TileColor" />

  
  <link href='&#x2F;icons&#x2F;site.webmanifest' rel="manifest" />
  
  
  <link color="#5bbad5" href='&#x2F;icons&#x2F;safari-pinned-tab.svg' rel="mask-icon" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-16x16.png' rel="icon" sizes="16x16" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;favicon-32x32.png' rel="icon" sizes="32x32" type="image/png" />
  
  
  <link href='&#x2F;icons&#x2F;apple-touch-icon.png' rel="apple-touch-icon" sizes="180x180" />
  

  

  

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1.9.1/css/academicons.min.css" integrity="sha384-FIue+PI4SsI9XfHCz8dBLg33b0c1fMJgNU3X//L26FYbGnlSEfWmNT7zgWc2N9b6" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css" integrity="sha256-AbA177XfpSnFEvgpYu1jMygiLabzPCJCRIBtR5jGc0k=" crossorigin="anonymous">
  <link href="https://codereflections.com/deep-thought.css" rel="stylesheet" />
  
  

  <title>
    
CodeReflections | Bootstrapping Perl without a compiler.

  </title>

  
  
  

  

  <link rel="stylesheet" href="https://codereflections.com/css/chatgpt.css">
</head>

<body class="has-background-white">
  <nav aria-label="section navigation" class="navbar is-fixed-top is-light" role="navigation">
    <div class="container">
      <div class="navbar-brand">
        <a class="navbar-item is-size-5 has-text-weight-bold" href="https:&#x2F;&#x2F;codereflections.com">CodeReflections</a>
        <a aria-expanded="false" aria-label="menu" class="navbar-burger burger" data-target="navMenu" role="button">
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
      </div>
      <div class="navbar-menu" id="navMenu">
        <div class="navbar-end has-text-centered">
          
          
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;codereflections.com&#x2F;">
            Home
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;codereflections.com&#x2F;tags">
            Tags
          </a>
          
          <a class="navbar-item has-text-weight-semibold" href="https:&#x2F;&#x2F;codereflections.com&#x2F;categories">
            Categories
          </a>
          
          
          
          <a class="navbar-item" id="nav-search" title="Search" data-target="#search-modal">
            <span class="icon">
              <i class="fas fa-search"></i>
            </span>
          </a>
          <a class="navbar-item" id="dark-mode" title="Switch to dark theme">
            <span class="icon">
              <i class="fas fa-adjust"></i>
            </span>
          </a>
        </div>
      </div>
    </div>
  </nav>

  <div style="padding-top: 3.25rem"></div>

  
  

  
<section class="section">
  <div class="container">
    <div class="columns">
      <div class="column is-8 is-offset-2">
        <article class="box">
          <h1 class="title">
            Bootstrapping Perl without a compiler.
          </h1>
          <p class="subtitle"></p>
          <div class="columns is-multiline is-gapless">
            <div class="column is-8">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="fas fa-user"></i>
  </span>
  <span>Deven T. Corzine published on</span>
  <span class="icon">
    <i class="far fa-calendar-alt"></i>
  </span>
  <span><time datetime="2023-12-24">December 24, 2023</time></span>
</span>

            </div>
            <div class="column is-4 has-text-right-desktop">
              
<span class="icon-text has-text-grey">
  <span class="icon">
    <i class="far fa-clock"></i>
  </span>
  <span>5 min,</span>
  <span class="icon">
    <i class="fas fa-pencil-alt"></i>
  </span>
  <span>894 words</span>
</span>

            </div>
            <div class="column">
              
              
<p>
  Categories:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://codereflections.com/categories/story/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-cube"></i>
      </span>
      <span>Story</span>
    </span>
  </a>
  
</p>

              
            </div>
            <div class="column has-text-right-desktop">
              
              
<p>
  Tags:
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://codereflections.com/tags/perl/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>Perl</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://codereflections.com/tags/gcc/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>GCC</span>
    </span>
  </a>
  
  <a class="has-text-info-dark has-text-weight-semibold" href="https://codereflections.com/tags/cross-compiling/">
    <span class="icon-text">
      <span class="icon">
        <i class="fas fa-tag"></i>
      </span>
      <span>cross-compiling</span>
    </span>
  </a>
  
</p>

              
            </div>
          </div>
          <div class="content mt-2">
            <p>Back in March of 1991, I started a new job as a software developer for a very
small company.  From day one, I knew that Perl was an essential tool which I
needed for the job.  However, I needed Perl to run on an <a rel="noopener nofollow noreferrer" target="_blank" href="https://en.wikipedia.org/wiki/Altos_Computer_Systems">Altos
Unix</a> system which was
missing the C compiler, so this was easier said than done!  It turned out to be
an interesting bootstrapping challenge to solve using free software, though it
did require jumping through a few hoops.</p>
<span id="continue-reading"></span>
<p>Of course, there <strong>was</strong> a standard system C compiler for Altos Unix, but it
was not included with the base operating system and had to be purchased as a
rather expensive add-on feature.  If I remember correctly, the price was
something like $3,000!  (Keep in mind that Linux didn't even <strong>exist</strong> yet.)
My new boss didn't want to incur that cost, so I had to try to bootstrap Perl
from scratch using only free software.</p>
<p>More to the point, I needed to bootstrap GCC to replace the missing system C
compiler.  Once that was done, compiling Perl would be straightforward.  (At
that time, Perl was at version 3.044, and GCC was at version 1.39.)</p>
<p>As it turned out, even though there was no C compiler on the Altos Unix system,
other essential runtime components <strong>were</strong> included with the base system.
There was a linker, an assembler, a system C library, system C include files,
and the <a rel="noopener nofollow noreferrer" target="_blank" href="https://en.wikipedia.org/wiki/Crt0">crt0.o</a> C runtime startup object
file.</p>
<p>Luckily, I had access to a Digital Unix system (with a C compiler) that I could
use for this.  On that system, I started with the normal GCC bootstrapping
procedure to build a native GCC for Digital Unix:</p>
<ul>
<li>
<p>First, I compiled GCC using the Digital Unix system C compiler, creating a
native GCC binary compiled by the system C compiler.  This is a &quot;stage 1&quot;
build of GCC.</p>
</li>
<li>
<p>Next, I used that stage 1 GCC binary to compile GCC again from scratch,
creating a fully-optimized native GCC binary compiled by GCC itself.  This is
a &quot;stage 2&quot; build of GCC.</p>
</li>
<li>
<p>Finally, I used the stage 2 GCC binary to compile GCC again from scratch.
This is a &quot;stage 3&quot; build of GCC, which should be identical to the &quot;stage 2&quot;
build.  This build is compared with the stage 2 build to validate that the
GCC compiler is working correctly.</p>
</li>
</ul>
<p>Once I had a native GCC build for Digital Unix, I then reconfigured the GCC
build process to build a cross-compiler, to run on Digital Unix (using VAX
hardware) while generating code for the Altos Unix system (using 80386
hardware).  This is a strange configuration, to say the least.</p>
<p>I ran through the GCC build for this cross-compiler, creating a native GCC
binary for Digital Unix, compiled by the native GCC build, generating 80386
code that couldn't run on the Digital Unix system.  Of course, since this was a
cross-compiler, there was no 3-stage build process here.</p>
<p>Next, I reconfigured the GCC build process yet again.  This time, I configured
it as a native compiler for the Altos Unix system, using the Altos Unix system
C include files that I had transferred to the Digital Unix system.  Of course,
was impossible to fully build this configuration on the Digital Unix system
because the native Digital Unix assembler couldn't create native Altos Unix
object files, and the native Digital Unix linker couldn't create a native Altos
Unix binary.</p>
<p>However, I could still use the Digital Unix binary of the GCC cross-compiler
configuration to perform the key step of compiling each of GCC's C source code
files, which I couldn't do on the Altos Unix system itself because of the
missing C compiler.  Since the Digital Unix assembler couldn't create native
Altos Unix object files, I had to compile each of the C source code files into
<code>*.s</code> assembly-language files instead of <code>*.o</code> object files.</p>
<p>At this point, I transferred all the files from the Digital Unix system to the
Altos Unix system, and used the native Altos Unix <code>as</code> assembler to assemble
each of the <code>*.s</code> assembly-language files (compiled from GCC's C source code
files) into native Altos Unix <code>*.o</code> object files.  I was then able to use the
native Altos Unix <code>ld</code> linker to link the native Altos Unix <code>crt0.o</code> C runtime
startup code with all of the <code>*.o</code> object files for the GCC compiler and the
<code>libc.a</code> system C library, finally creating a native Altos Unix binary of the
GCC compiler, configured as a native compiler for the Altos Unix system.</p>
<p>Once I had this native binary on the Altos Unix system, I pretended that it was
the system C compiler and used it to perform a full 3-stage GCC build from
scratch, installing the final GCC binary on the Altos Unix system as
<code>/usr/local/bin/gcc</code>.  Now I had a fully-bootstrapped native GCC compiler for
the Altos Unix system, despite the lack of a system C compiler to start the
process.</p>
<p>From that point forward, it was like working with any other Unix system.  After
building the GNU assembler and linker, I compiled Perl 3.044 and other GNU
software of interest.  Then I was finally able to start writing Perl code for
my new job!</p>

          </div>
        </article>
      </div>
      
    </div>
  </div>
</section>


  
  <section class="modal" id="search-modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title">Search</p>
      </header>
      <section class="modal-card-body">
        <div class="field mb-2">
          <div class="control">
            <input class="input" id="search" placeholder="Search this website." type="search" />
          </div>
        </div>
        <div class="search-results">
          <div class="search-results__items"></div>
        </div>
      </section>
    </div>
    <button aria-label="close" class="modal-close is-large"></button>
  </section>
  


  

<section class="section">
  <div class="container">
    <div class="columns is-centered">
      <div class="column is-8">
        <nav class="level">
              
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;codereflections.com&#x2F;2023&#x2F;12&#x2F;23&#x2F;using-git-submodules-with-zola&#x2F;">
              <span class="icon mr-2">
                <i class="fas fa-arrow-circle-left"></i>
              </span>
              Using Git submodules with Zola!
            </a>
          </div>
           
          <div class="level-item has-text-centered">
            <a class="button is-black is-outlined" href="https:&#x2F;&#x2F;codereflections.com&#x2F;2025&#x2F;07&#x2F;01&#x2F;its-been-quiet-around-here&#x2F;">
              It&#x27;s been quiet around here...<span class="icon ml-2">
                <i class="fas fa-arrow-circle-right"></i>
              </span>
            </a>
          </div>
          
        </nav>
      </div>
    </div>
  </div>
</section>



  



  
  <footer class="footer py-4">
    <div class="content has-text-centered">
      <p>
        Powered by
        <span class="icon-text">
          <span class="icon">
            <i class="fas fa-power-off"></i>
          </span>
          <span>zola</span>
        </span>
      </p>
    </div>
  </footer>
  

  
  
  
  
  <script src="https://codereflections.com/elasticlunr.min.js"></script>
  <script src="https://codereflections.com/search_index.en.js"></script><script src="https://codereflections.com/js/site.js"></script>

  





  
  
</body>

</html>
